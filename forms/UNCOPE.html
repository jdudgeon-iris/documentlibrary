<!doctype html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=612, user-scalable=no">

	<!-- Font Awesome -->
	<script src="https://kit.fontawesome.com/3842d44a07.js" crossorigin="anonymous"></script>

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>

	<title>UNCOPE</title>
	<link rel="icon" href="/static/img/favicon.png" type="image/x-icon">
	<link rel="stylesheet" href="styles.css">
</head>

<body style="background: #7867AE">
	<div id="print-section" class="container mt-3 mb-3 pb-2 rounded-3 bg-light">
		<br>
		<form id="form-container" class="container mt-3 mb-3 pb-2" method="post" action="/submit">
			<div>
				<img src="/static/img/Iris Logo.png" alt="Logo" id="logo" class="img-fluid mx-auto d-block mb-3"
					style="max-width: 200px;">
				<hr>
				<h1 class="text-center">UNCOPE</h1>
			</div>
			<!-- Content -->

			<div class="row print-inline-row-2 mt-2">
				<div class="col">

					<div class="row">
						<small class="text-body-secondary">Answer the questions to the right. In the last 12 months,
							have you:</small>
					</div>
					<div class="row">
						<small class="text-body-secondary">Scoring: <ul>
								<li>Yes = 1 No = 0</li>
								<li>2-3 indicates possible substance abuse</li>
								<li>4 or more strongly indicate substance dependence</li>
								<li>Scores of 2+ require a follow up</li>
							</ul></small>
					</div>
					<div class="row">
						<label for="score" class="form-label">Score: <span id="uncopeScore"></span></label>
					</div>
				</div>
				<div class="col">
					<div class="row">
						<label for="uncope1" class="form-label">1. In the past year, have you ever drunk or used
							drugs more than you meant to? Or have you spent more time drinking or using than you
							intended?</label>
						<div class="col">
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope1Yes" value="1">
								<label class="form-check-label" for="inlineCheckbox1">Yes</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope1No" value="0">
								<label class="form-check-label" for="inlineCheckbox2">No</label>
							</div>
						</div>
					</div>
					<div class="row">
						<label for="uncope2" class="form-label">2. Have you ever neglected some of your usual
							responsibilities because of using last year?</label>
						<div class="col">
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope2Yes" value="1">
								<label class="form-check-label" for="inlineCheckbox1">Yes</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope2No" value="0">
								<label class="form-check-label" for="inlineCheckbox2">No</label>
							</div>
						</div>

					</div>
					<div class="row">
						<label for="uncope3" class="form-label">3. Have you felt you wanted or needed to cut down on
							your drinkin or drug use in the last year?</label>
						<div class="col">
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope3Yes" value="1">
								<label class="form-check-label" for="inlineCheckbox1">Yes</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope3No" value="0">
								<label class="form-check-label" for="inlineCheckbox2">No</label>
							</div>
						</div>

					</div>
					<div class="row">
						<label for="uncope4" class="form-label">4. Has anyone objected to your drinking or drug use?
							Or has your family, friend, or anyone else told you they objected to your drug or
							alcohol use?</label>
						<div class="col">
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope4Yes" value="1">
								<label class="form-check-label" for="inlineCheckbox1">Yes</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope4No" value="0">
								<label class="form-check-label" for="inlineCheckbox2">No</label>
							</div>
						</div>

					</div>
					<div class="row">
						<label for="uncope5" class="form-label">5. Have you ever found yourself preoccupied with
							wanting to use drugs or alcohol? Or have you found yourself thinking a lot about using
							or drinking?</label>
						<div class="col">
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope5Yes" value="1">
								<label class="form-check-label" for="inlineCheckbox1">Yes</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope5No" value="0">
								<label class="form-check-label" for="inlineCheckbox2">No</label>
							</div>
						</div>

					</div>
					<div class="row">
						<label for="uncope6" class="form-label">6. Have you ever used alcohol or drugs to relieve
							emotional discomfort such as sadness, anger, or boredom?</label>
						<div class="col">
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope6Yes" value="1">
								<label class="form-check-label" for="inlineCheckbox1">Yes</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="uncope6No" value="0">
								<label class="form-check-label" for="inlineCheckbox2">No</label>
							</div>
						</div>
					</div>
				</div>

				<div class="row print-inline-row-2 mt-5">
					<div class="col">
						<label for="completedBy" class="form-label">Completed By</label>
						<input type="text" class="form-control" id="completedBy" name="completedBy">
					</div>
					<div class="col">
						<label for="date" class="form-label">Date Completed</label>
						<input type="date" class="form-control" id="date" name="date">
					</div>
				</div>
			</div>
		</form>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>


	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const dateOfBirthInput = document.getElementById("dateOfBirth");
			const ageLabel = document.getElementById("age");

			dateOfBirthInput.addEventListener("change", function () {
				const dob = new Date(this.value);
				const today = new Date();
				let age = today.getFullYear() - dob.getFullYear();
				const monthDiff = today.getMonth() - dob.getMonth();
				const dayDiff = today.getDate() - dob.getDate();

				// Adjust age if birthday hasn't occurred yet this year
				if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) {
					age--;
				}

				if (!isNaN(age)) {
					ageLabel.textContent = `(${age} years old)`;
				} else {
					ageLabel.textContent = "(Age)";
				}
			});
		});
	</script>
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const totalQuestions = 6;
			const scoreDisplay = document.getElementById("uncopeScore");

			function calculateScore() {
				let score = 0;
				for (let i = 1; i <= totalQuestions; i++) {
					const yesCheckbox = document.getElementById(`uncope${i}Yes`);
					if (yesCheckbox && yesCheckbox.checked) {
						score += 1;
					}
				}
				scoreDisplay.textContent = score;
			}

			for (let i = 1; i <= totalQuestions; i++) {
				const yesCheckbox = document.getElementById(`uncope${i}Yes`);
				const noCheckbox = document.getElementById(`uncope${i}No`);

				if (yesCheckbox && noCheckbox) {
					yesCheckbox.addEventListener("change", function () {
						if (this.checked) noCheckbox.checked = false;
						calculateScore();
					});

					noCheckbox.addEventListener("change", function () {
						if (this.checked) yesCheckbox.checked = false;
						calculateScore();
					});
				}
			}
		});
	</script>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const container = document.getElementById("significantOtherContainer");

			container.addEventListener("click", function (e) {
				if (e.target.classList.contains("add-btn")) {
					const entry = e.target.closest(".significant-other-entry");
					const clone = entry.cloneNode(true);

					// Clear textarea
					const textarea = clone.querySelector("textarea");
					if (textarea) textarea.value = "";

					container.appendChild(clone);
				}

				if (e.target.classList.contains("remove-btn")) {
					const entries = container.querySelectorAll(".significant-other-entry");
					if (entries.length > 1) {
						e.target.closest(".significant-other-entry").remove();
					} else {
						alert("At least one entry must remain.");
					}
				}
			});
		});
	</script>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const container = document.getElementById("mentalHealthContainer");

			container.addEventListener("click", function (e) {
				if (e.target.classList.contains("add-mental-btn")) {
					const entry = e.target.closest(".mental-health-entry");
					const clone = entry.cloneNode(true);

					// Clear textarea
					const textarea = clone.querySelector("textarea");
					if (textarea) textarea.value = "";

					container.appendChild(clone);
				}

				if (e.target.classList.contains("remove-mental-btn")) {
					const entries = container.querySelectorAll(".mental-health-entry");
					if (entries.length > 1) {
						e.target.closest(".mental-health-entry").remove();
					} else {
						alert("At least one mental health entry must remain.");
					}
				}
			});
		});
	</script>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const container = document.getElementById("familyMemberContainer");

			container.addEventListener("click", function (e) {
				if (e.target.classList.contains("add-family-btn")) {
					const entry = e.target.closest(".family-member-entry");
					const clone = entry.cloneNode(true);

					// Clear textarea
					const textarea = clone.querySelector("textarea");
					if (textarea) textarea.value = "";

					container.appendChild(clone);
				}

				if (e.target.classList.contains("remove-family-btn")) {
					const entries = container.querySelectorAll(".family-member-entry");
					if (entries.length > 1) {
						e.target.closest(".family-member-entry").remove();
					} else {
						alert("At least one family member entry must remain.");
					}
				}
			});
		});
	</script>


	<script src="js/setdates.js"></script>

</body>

</html>