<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
	<meta name="viewport" content="width=612, user-scalable=no">

    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/3842d44a07.js" crossorigin="anonymous"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>

    <title>Consent to Communicate</title>
    <link rel="icon" href="/static/img/favicon.png" type="image/x-icon">
	<link rel="stylesheet" href="styles.css">
  </head>
  <body style="background: #7867AE">
		<div class="container mt-3 mb-3 pb-2 rounded-3 bg-light">
			<br>
			<form id="form-container" class="container mt-3 mb-3 pb-2" method="post" action="/submit">
				<div class="pdf-section">
					<div>
						<img src="/static/img/Iris Logo.png" alt="Logo" class="img-fluid mx-auto d-block mb-3" style="max-width: 200px;">
						<hr>
						<h1 class="text-center">Consent to Communicate</h1>
					</div>

					<div>
						<p>
							Please check next to all the statements for which you give permission. 
							All or any part of this release may be revoked by the participant at any time by providing written notice to Iris Family Support Center.
						</p>

						<p>
							<input class="form-check-input" type="checkbox" value="" id="checkDefault">
							&nbsp;I give permission for Iris Family Support Center staff to leave messages on my home/cell voice mail or answering machine.
						</p>
						<p>
							<input class="form-check-input" type="checkbox" value="" id="checkDefault">
							&nbsp;I give permission for Iris Family Support Center staff to email me at the following email address
						</p>
						<p>
							<input class="form-check-input" type="checkbox" value="" id="checkDefault">
							&nbsp;I understand that despite allowable contact via Facebook Messenger, Iris Family Support Center staff cannot be followers, friends, or connected with me on social media in any other manner outside of messenger or Iris Family Support Center program specific applications or groups
						</p>
						<p>
							<input class="form-check-input" type="checkbox" value="" id="checkDefault">
							&nbsp;I give permission for Iris Family Support Center staff to send texts to my cell phone.
						</p>
						<p>
							<input class="form-check-input" type="checkbox" value="" id="checkDefault">
							&nbsp;I give permissions for Iris Family Support Center staff to send messages via Facebook Messenger on an account I provide
						</p>
						<p>
							<input class="form-check-input" type="checkbox" value="" id="checkDefault">
							&nbsp;I give permission for technology-based visits in the event that there is a qualifying need and they are approved by Iris Family Support Center and/or the referral agency coordinator.
						</p>
						<p>
							I do have access to the following:
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
								<label class="form-check-label" for="inlineCheckbox1">Zoom</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
								<label class="form-check-label" for="inlineCheckbox2">Facetime</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
								<label class="form-check-label" for="inlineCheckbox2">Internet</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
								<label class="form-check-label" for="inlineCheckbox2">Cellular Data</label>
							</div>
						</p>

						<p>
							I agree to:
							<ul>
								<li>
									Have my camera on during the visit or meeting
								</li>
								<li>
									Be in a confidential space during the visit or meeting
								</li>
								<li>
									Be stationary during the visit or meeting
								</li>
								<li>
									Follow the same guidelines as an in person visit or meeting
								</li>
								<li>
									Notify staff if my abiliyt to access any of the services changes
								</li>
							</ul>
						</p>
						<p>
							I understand:
							<ul>
								<li>
									Iris Family Support Center staff will be the host of the visit or meeting
								</li>
								<li>
									Iris Family Support Center staff may stop the visit or meeting based on my ability to follow the established guidelines for visits or meetings
								</li>
							</ul>
						</p>
					</div>
				</div>
				<div class="pdf-section">
						<p>
							<input class="form-check-input" type="checkbox" value="" id="checkDefault">
							&nbsp;I give permission for Iris Family Support Center staff to call my emergency/alternate contacts at the following numbers:
							<div id="input-container">
								<div class="input-group">
									<span class="input-group-text mb-1">Name and Phone #</span>
									<input type="text" class="form-control mb-1"> <input type="text" class="form-control mb-1">
								</div>
							</div>
							<div class="text-center">
								<button type="button" class="btn btn-primary" onclick="addNamePhoneRow()">Add Row</button>
								<button type="button" class="btn btn-danger" onclick="removeNamePhoneRow()">Remove Row</button>
							</div>
						</p>
						<p>
							<input class="form-check-input" type="checkbox" value="" id="checkDefault">
							&nbsp;I give permission for Iris Family Support Center staff to talk to the following people in my household during my home visitation services
							<div id="input-container-1">
								<div class="input-group">
									<span class="input-group-text mb-1">Name</span>
									<input type="text" class="form-control mb-1">
								</div>
							</div>
							<div class="text-center mt-1">
								<button type="button" class="btn btn-primary" onclick="addPermissionRow()">Add Row</button>
								<button type="button" class="btn btn-danger" onclick="removePermissionRow()">Remove Row</button>
							</div>
						</p>
				</div>
				<div class="pdf-section">
						<div>
							<p>
								Release is valid for no longer than 12 months. Expires on: <strong><label id="ExpiresOn"></label></strong>
							</p>
						</div>
					<hr>
					<div id="signature section">
						<div class ="container-fluid">
							<div class="row align-items-start">
								<div class="mb-3 col">
									<input type="text" class="form-control" id="client1name">
									<label class="form-text" for="client1name">Client Name</label>
								</div>
								<div class="mb-3 col">
									<div class="mb-3 text-center">
										<img id="client1signature-image" src="" alt="Client Signature" style="border:1px solid #000; width: 300px; height: 55px; display: none;">
										<button id="client1signbutton" type="button" class="btn btn-outline-primary btn-sm mt-2" data-bs-toggle="modal" data-bs-target="#client1signatureModal">Sign Here</button>
									</div>
									<div class="mb-3 row align-items-start">
										<label class="form-text col" for="client1signature-pad">Client Signature</label>
										<a href="#" onclick="clearSignatureImage('client1signature-image'); return false;" class="form-text col">Clear Signature</a>
									</div>
								</div>
								<div class="mb-3 col">
									<input type="date" class="form-control" id="client1Signed" style="width: auto;">
									<label class="form-text" for="client1Signed">Date Signed</label>
								</div>
							</div>
						</div>
						<div class ="container-fluid">
							<div class="row align-items-start">
								<div class=" mb-3 col">
									<input type="text" class="form-control" id="client2name" >
									<label class="form-text" for="client2name">Client Name</label>
								</div>
								<div class=" mb-3 col">
									<div class="mb-3 text-center">
										<img id="client2signature-image" src="" alt="Client Signature" style="border:1px solid #000; width: 300px; height: 55px; display: none;">
										<button id="client2signbutton" type="button" class="btn btn-outline-primary btn-sm mt-2" data-bs-toggle="modal" data-bs-target="#client2signatureModal">Sign Here</button>
									</div>
									<div class="mb-3 row align-items-start">
										<label class="form-text col" for="client2signature-pad">Client Signature</label>
										<a href="#" onclick="clearSignatureImage('client2signature-image'); return false;" class="form-text col">Clear Signature</a>
									</div>
								</div>
								<div class="mb-3 col">
									<input type="date" class="form-control" id="client2Signed" name="client2Signed" style="width: auto;">
									<label class="form-text" for="client2Signed">Date Signed</label>
								</div>
							</div>
						</div>
						<div class ="container-fluid">
							<div class="row align-items-start">
								<div class="mb-3 col">
									<input type="text" class="form-control" id="staffname" >
									<label class="form-text" for="staffname">Staff Name</label>
								</div>
								<div class="mb-3 col">
									<div class="mb-3 text-center">
										<img id="staffsignature-image" src="" alt="Staff Signature" style="border:1px solid #000; width: 300px; height: 55px; display: none;">
										<button id="staffsignbutton" type="button" class="btn btn-outline-primary btn-sm mt-2" data-bs-toggle="modal" data-bs-target="#staffsignatureModal">Sign Here</button>
									</div>
									<div class="mb-3 row align-items-start">
										<label class="form-text col" for="staffsignature-pad">Staff Signature</label>
										<a href="#" onclick="clearSignatureImage('staffsignature-image'); return false;" class="form-text col">Clear Signature</a>
									</div>
								</div>
								<div class="mb-3 col">
									<input type="date" class="form-control" id="staffSigned" style="width: auto;">
									<label class="form-text" for="staffSigned">Date Signed</label>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>
			<button type="button" class="btn btn-primary" onclick="saveAsPDF()">Save as PDF</button>
		</div>


<div class="modal fade" id="client1signatureModal" tabindex="-1" aria-labelledby="client1signatureModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="client1signatureModalLabel">Client Signature</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body text-center">
			<canvas class="signature-pad" id="client1signature-pad"></canvas>
				<div class="mt-2">
					<button class="btn btn-sm btn-secondary" onclick="clearSignature('client1signature-pad')">Clear</button>
					<button class="btn btn-sm btn-primary" onclick="saveSignatureToImage('client1')">Save</button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="client2signatureModal" tabindex="-1" aria-labelledby="client2signatureModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="client2signatureModalLabel">Client Signature</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body text-center">
			<canvas class="signature-pad" id="client2signature-pad"></canvas>
				<div class="mt-2">
					<button class="btn btn-sm btn-secondary" onclick="clearSignature('client2signature-pad')">Clear</button>
					<button class="btn btn-sm btn-primary" onclick="saveSignatureToImage('client2')">Save</button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="staffsignatureModal" tabindex="-1" aria-labelledby="signatureModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="signatureModalLabel">Staff Signature</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body text-center">
			<canvas class="signature-pad" id="staffsignature-pad"></canvas>
				<div class="mt-2">
					<button class="btn btn-sm btn-secondary" onclick="clearSignature('staffsignature-pad')">Clear</button>
					<button class="btn btn-sm btn-primary" onclick="saveSignatureToImage('staff')">Save Signature</button>
				</div>
			</div>
		</div>
	</div>
</div>


<script>
  // Utility function to create an input element
  function createInput(className = 'form-control', placeholder = '') {
    const input = document.createElement('input');
    input.type = 'text';
    input.className = className;
    input.placeholder = placeholder;
    return input;
  }

  // Section 1: Name and Phone #
  let namePhoneCount = 1;
  const maxNamePhoneInputs = 10;

  function addNamePhoneRow() {
    if (namePhoneCount >= maxNamePhoneInputs) {
      alert("Maximum number of inputs reached.");
      return;
    }
    namePhoneCount++;

    const container = document.getElementById("input-container");
    const group = document.createElement("div");
    group.className = "input-group";

    const label = document.createElement("span");
    label.className = "input-group-text mb-1";
    label.textContent = "Name and Phone #";

    const nameInput = createInput("form-control mb-1");
    const phoneInput = createInput("form-control mb-1");

    group.appendChild(label);
    group.appendChild(nameInput);
    group.appendChild(phoneInput);
    container.appendChild(group);
  }

  function removeNamePhoneRow() {
    if (namePhoneCount <= 1) {
      alert("At least one input must remain.");
      return;
    }
    const container = document.getElementById("input-container");
    container.removeChild(container.lastElementChild);
    namePhoneCount--;
  }

  // Section 2: Permission to Talk To
  let permissionCount = 1;

  function addPermissionRow() {
  permissionCount++;

  const container = document.createElement('div');
  container.className = 'input-container input-group';

  const label = document.createElement('span');
  label.className = 'input-group-text mb-1';
  label.textContent = 'Name';

  const input = createInput('form-control mb-1');

  container.appendChild(label);
  container.appendChild(input);

  document.getElementById('input-container-1').appendChild(container);
}


  function removePermissionRow() {
    const containers = document.querySelectorAll('#input-container-1 .input-container');
    if (containers.length > 0) {
      containers[containers.length - 1].remove();
      permissionCount--;
    } else {
      alert("At least one input must remain.");
    }
  }
</script>






		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
		<script src="js/setdates.js"></script>
		<script src="js/signature-pad.js"></script>
		<script src="js/savepdf.js"></script>
	</body>
</html>

